# 1. 가상화 기술
## 애플리케이션 서버
**서버**는 클라이언트가 요청을 보내면 결과를 응답한다.
엔터프라이즈 운영 환경에서는 WEB, WAS, DB 등 많은 양의 서버를 운영한다. 
이때 기업에서 많은 양의 서버를 운영하는 방식은 3가지로 나뉜다.

1. 베어메탈(Baremetal)
2. 하이퍼바이저(Hypervisor)
3. 컨테이너(Container)

이중 베어메탈은 컴퓨터를 하나 구입하고 그 컴퓨터 위에 OS 설치하고 여러 개의 소프트웨어를 실행시키는 방식이다. 베어메탈은 기업에서 운영하기 비효율적이다.
## 가상화기술과 하이퍼바이저 가상화
**가상화 기술이란?** 
- 실제로 존재하는 컴퓨터가 아니지만 마치 존재하는 것처럼 만들어주는 기술
- 물리적인 컴퓨팅 환경 내에서 논리적인 컴퓨팅 환경을 만들 수 있는 기술

**왜 가상화 기술을 사용할까?**
하나의 OS 위에 여러 프로그램을 실행시킬 경우 여러가지 문제가 있다.
- 하나의 프로그램에서 문제가 생긴다면 다른 프로그램에도 영향을 줄 위험이 있다.
- 하나의 프로그램의 사용량이 급증해서 리소스를 모두 소모한다면 나머지 프로그램이 정상적으로 동작하지 않을 수 있다.

가상화 기술을 사용하면 사용자가 하나의 가상 OS가 사용할 수 있는 리소스의 최대값을 정할 수 있다.
하나의 컴퓨터 안에 여러 개의 OS를 띄우기 때문에 리소스 사용량이 늘어난다. 
하지만 자원이 논리적으로 격리되어 있어 안정적이다. 그리고 물리적으로 한 대의 컴퓨터를 사용해서 경제적이다. (낮은 성능 여러대보다 높은 성능 한 대가 더 경제적)

**하이퍼바이저**와 **컨테이너**는 가상화 기술을 이용한 방식이다.

**하이퍼 바이저란?**
하이퍼 바이저는 가상화를 사용하기 위해 하이퍼바이저를 설치한 다음 게스트 OS에서 프로세스를 운영한다.
물리적인 서버에 설치되는 OS인 호스트 OS는 물리적인 하드웨어와 직접 연결되어 있고 게스트 OS는 호스트 OS의 리소스를 나눈 논리적인 공간이다.

OS마다 다른 종류의 커널을 사용하기 때문에 하이퍼바이저는 다른 커널 간의 시스템콜을 통역해주는 통역가 역할을 수행한다.

## 컨테이너 가상화
컨테이너는 가볍고 빠르다.

컨테이너 가상화는 리눅스 커널이 제공하는 LXC라는 자체 격리 기술에서 출발했다.

**하이퍼바이저 vs 컨테이너**
하이퍼바이저라는 소프트웨어가 격리된 공간을 만들었다면 컨테이너는 LXC 기술이라는 커널의 자체 기능만 사용하여 격리 공간을 만들었다.

모든 컨테이너가 호스트 OS를 공유한다. 반면 하이퍼바이저는 게스트 OS와 호스트 OS가 독립적이다.

컨테이너는 중간 단계가 없어 하드웨어 리소스 사용 요청이 효율적으로 이뤄져 오버헤드 낮다. 그리고 커널 실행 비용도 없어졌다.

다만 커널이 독립적이지 않아 가상 머신보다 보안성이 낮고 호스트 OS 외 다른 OS 사용 불가하다.

## 도커(Docker)
커널이 자체적으로 제공하는 가상화 기술은 사용자가 직접 컨트롤하기 어렵다. 도커는 커널의 가상화 기술을 활용할 수 있게 도와주는 보조 도구이다.

**도커 아키텍처**
- 컨테이너 엔진 
    - 사용자의 요청을 받아서 컨테이너를 관리
- 컨테이너 런타임 
    - 직접 커널과 통신하면서 실제로 격리된 공간을 만듦 (runc)

클라이언트 - 서버 모델
Docker CLI가 클라이언트 툴로 제공 도커 데몬과 쉽게 통신한다. CLI는 명령어를 입력하면 서버의 API 양식에 맞게 만들어 데몬에 전달한다.