# 3. 이미지 레지스트리
## 이미지 레지스트리
이미지 레지스트리는 도커 이미지를 저장하기 위한 저장소이다. 레지스트리를 통해서 개인이나 팀이 이미지를 다른 사람과 공유하거나 필요한 이미지를 다운받을 수 있다.

- 기능
    - 이미지 공유
        - 이미지 다운로드 & 업로드
    - 이미지 검색
    - 이미지 버전 관리
    - 보안
        - 원하는 사용자만 이미지를 다운받을 수 있도록 인증 처리 및 권한 관리
        - 업로드된 이미지의 보안을 검증
    - 파이프라인
        - 이미지를 업로드 시 자동으로 배포되도록 연계와 알림

- 종류
    - 호스트 머신의 로컬 스토리지
    - 퍼블릭 레지스트리
    - 프라이빗 레지스트리 
        - 기업에서 많이 쓰며 내부망에서만 사용 가능
        - 설치형 : Harbor, 도커 프라이빗 레지스트리
        - 퍼블릭 클라우드 : AWS ECR, Azure ACR

### 이미지명 규칙
레지스트리주소/프로젝트명/이미지명:이미지태그

- default  
    - 레지스트리 
        - docker.io
    - 프로젝트명 
        - library
        - 라이브러리(library)라는 프로젝트에는 도커사가 직접 검증한 오피셜 이미지를 관리한다.
    - 이미지태그
        - latest

로컬 스토리지로 이미지 다운로드
```shell
docker pull (이미지명)
```

로컬스토리지의 이미지명 추가

이름을 어떻게 주는지에 따라서 어디에 푸시되는지 결정된다.
```shell
docker tag (기존이미지명) (추가할 이미지명)
```

이미지 레지스트리에 이미지 업로드
```shell
docker push (이미지명)
```
이미지 레지스트리 인증 정보 생성

인증 정보가 저장되는 곳은 OS마다 다르며 Mac, Linux의 경우 ~/docker/config.json에 저장된다.
```shell
docker login
```

이미지 레지스트리 인증 정보 삭제
```shell
docker logout
```

로컬 스토리지의 이미지 삭제
```shell
docker image rm (이미지명)
```

애플리케이션을 실행할 때 OS나 라이브러리가 PC별로 차이가 있다. 컨테이너를 사용하면 환경의 차이에서 나오는 문제들을 근본적으로 해결할 수 있다.
간단한 웹 서버부터 복잡한 애플리케이션 서버 구성까지 이미지에 실행 가능한 형태로 저장해서 공유하면 서버를 운영하는 비용을 줄이고 새로운 서버를 구성하는 시간을 크게 단축시킬 수 있다.